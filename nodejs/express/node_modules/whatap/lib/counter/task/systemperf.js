/**
 * Copyright 2016 the WHATAP project authors. All rights reserved.
 * Use of this source code is governed by a license that
 * can be found in the LICENSE file.
 */

var CounterTask     = require('./counter-task'),
    ResourceProfile = require('./../../util/resourceprofile'),
    SecurityMaster  = require('../../net/security-master');

function SystemPerf(){
    CounterTask.call(this);
}

SystemPerf.prototype = new CounterTask();
SystemPerf.prototype.constructor = SystemPerf;
SystemPerf.prototype.process = function(p) {
    var cpu = ResourceProfile.getCPU();
    if (cpu == null) return;

    p.cpu = cpu.usage;
    p.cpu_sys = cpu.sys;
    p.cpu_usr = cpu.user;
    p.cpu_irq = cpu.irq;
    p.cpu_proc = cpu.proc;

    p.disk = ResourceProfile.getDisk().usage;
    p.mem = ResourceProfile.getMemory().usage;
    p.cpu_cores = cpu.core;
    p.host_ip = SecurityMaster.IP;
};

module.exports = SystemPerf;