/**
 * Copyright 2016 the WHATAP project authors. All rights reserved.
 * Use of this source code is governed by a license that
 * can be found in the LICENSE file.
 */

var CounterTask     = require('./counter-task'),
    MeterSocketio   = require('../meter/meter-socket.io'),
    Long            = require('long');

function Socketio() {
    CounterTask.call(this);
}

Socketio.prototype = new CounterTask();
Socketio.prototype.constructor = Socketio;
Socketio.prototype.process = function (p) {
    p.websocket_count = MeterSocketio.connected_count;
    p.websocket_in = Long.fromValue(MeterSocketio.received_data);
    p.websocket_out = Long.fromValue(MeterSocketio.sent_data);
};

module.exports = Socketio;