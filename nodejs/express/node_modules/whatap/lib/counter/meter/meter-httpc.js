/**
 * Copyright 2016 the WHATAP project authors. All rights reserved.
 * Use of this source code is governed by a license that
 * can be found in the LICENSE file.
 */


var Long = require('long');

function Bucket() {
    this.count = 0;
    this.time = Long.fromNumber(0);
    this.error = 0;
}

function MeterHttpC() {
    this.bucket = new Bucket();
}

MeterHttpC.prototype.add = function (elapsed, err) {
    var b = this.bucket;
    b.count++;
    b.time = b.time.add(elapsed);
    if(err) {
        b.error++;
    }
};
MeterHttpC.prototype.getBucketReset = function () {
    var b = this.bucket;
    this.bucket = new Bucket();
    return b;
};

module.exports = new MeterHttpC();
